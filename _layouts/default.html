<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: 'en' }}">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="dark light">
  <meta name="theme-color" content="#0b1220">
  
  <title>{% if page.title %}{{ page.title | escape }} | {% endif %}{{ site.title | escape }}</title>
  <meta name="description" content="{{ page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape }}">
  
  <!-- Professional CSS -->
  <link rel="stylesheet" href="{{ '/assets/css/professional-clean.css' | relative_url }}">
  
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  
  <!-- Syntax highlighting (dark theme) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
  
  <!-- SEO and meta tags -->
  {% seo %}
  
  <!-- Feed -->
  <link type="application/atom+xml" rel="alternate" href="{{ '/feed.xml' | relative_url }}" title="{{ site.title | escape }}">
</head>

<body>
    <!-- Site Header -->
    <header class="site-header">
      <div class="header-container">
        <a href="{{ '/' | relative_url }}" class="site-title">{{ site.title | escape }}</a>
        
        <nav class="main-nav">
          <ul>
            <li><a href="{{ '/' | relative_url }}" class="nav-link {% if page.url == '/' %}active{% endif %}">Home</a></li>
            <li><a href="{{ '/posts/' | relative_url }}" class="nav-link {% if page.url contains 'posts' %}active{% endif %}">Posts</a></li>
            <li><a href="{{ '/projects/' | relative_url }}" class="nav-link {% if page.url contains 'projects' %}active{% endif %}">Projects</a></li>
            <li><a href="{{ '/tutorials/' | relative_url }}" class="nav-link {% if page.url contains 'tutorials' %}active{% endif %}">Tutorials</a></li>
            <li><a href="{{ '/about/' | relative_url }}" class="nav-link {% if page.url contains 'about' %}active{% endif %}">About</a></li>
            <li><a href="{{ '/contact/' | relative_url }}" class="nav-link {% if page.url contains 'contact' %}active{% endif %}">Contact</a></li>
          </ul>
        </nav>
      </div>
    </header>
    

    <!-- Main Content -->
    <main>
      {{ content }}
    </main>

    <!-- Footer -->
    <footer class="site-footer">
      <div class="container">
        <div class="footer-content">
          <p>&copy; {{ 'now' | date: "%Y" }} {{ site.title }}. All rights reserved.</p>
          <p>Built with <a href="https://jekyllrb.com/">Jekyll</a> and hosted on <a href="https://github.com/">GitHub</a>.</p>
        </div>
      </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <!-- Smooth scrolling and other interactions -->
    <script>
      // Smooth scrolling for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          document.querySelector(this.getAttribute('href')).scrollIntoView({
            behavior: 'smooth'
          });
        });
      });
      
      // Add fade-in animation to elements when they come into view
      const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      };
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('animate-fade-in-up');
          }
        });
      }, observerOptions);
      
      document.querySelectorAll('.card, .post-card, .interest-item').forEach(el => {
        observer.observe(el);
      });

      // Section dots: active state and rail shift on scroll direction
      (function() {
        const dotsNav = document.querySelector('.section-dots');
        if (!dotsNav) return;
        const dots = Array.from(dotsNav.querySelectorAll('.dot'));
        const targets = dots.map(d => document.getElementById(d.dataset.target));
        let lastScrollY = window.scrollY;

        // Highlight active dot using IntersectionObserver
        const activeObs = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            const idx = targets.indexOf(entry.target);
            if (idx === -1) return;
            if (entry.isIntersecting) {
              dots.forEach(d => d.classList.remove('active'));
              dots[idx].classList.add('active');
            }
          });
        }, { threshold: 0.6 });

        targets.forEach(t => { if (t) activeObs.observe(t); });

        // Scroll direction -> shift dot rail slightly
        window.addEventListener('scroll', () => {
          const curr = window.scrollY || document.documentElement.scrollTop;
          const dirUp = curr < lastScrollY;
          dotsNav.classList.toggle('shift-up', dirUp);
          dotsNav.classList.toggle('shift-down', !dirUp);
          lastScrollY = curr;
        }, { passive: true });
      })();
    </script>
</body>

</html>
